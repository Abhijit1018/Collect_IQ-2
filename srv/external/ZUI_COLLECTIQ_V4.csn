{
 "meta": {
  "creator": "cds-dk 9.6.0"
 },
 "$version": "2.0",
 "definitions": {
  "ZUI_COLLECTIQ_V4.PayerCbAControl": {
   "kind": "type",
   "@cds.external": true,
   "elements": {
    "_Invoices": {
     "type": "cds.Boolean",
     "notNull": true,
     "@Common.Label": "Dynamic CbA-Control",
     "@Common.Heading": "Dynamic Create by Association Control",
     "@Common.QuickInfo": "Dynamic Create via Association Control Property"
    }
   }
  },
  "ZUI_COLLECTIQ_V4.PayerOperationControl": {
   "kind": "type",
   "@cds.external": true,
   "elements": {
    "generateOutreach": {
     "type": "cds.Boolean",
     "notNull": true,
     "@Common.Label": "Dyn. Action Control",
     "@Common.Heading": "Dynamic Action Control",
     "@Common.QuickInfo": "Dynamic Action Property"
    }
   }
  },
  "ZUI_COLLECTIQ_V4.EntityControl": {
   "kind": "type",
   "@cds.external": true,
   "elements": {
    "Deletable": {
     "type": "cds.Boolean",
     "notNull": true,
     "@Common.Label": "Dyn. Method Control",
     "@Common.Heading": "Dynamic Method Control",
     "@Common.QuickInfo": "Dynamic Method Property"
    },
    "Updatable": {
     "type": "cds.Boolean",
     "notNull": true,
     "@Common.Label": "Dyn. Method Control",
     "@Common.Heading": "Dynamic Method Control",
     "@Common.QuickInfo": "Dynamic Method Property"
    }
   }
  },
  "ZUI_COLLECTIQ_V4.SAP__Message": {
   "kind": "type",
   "@cds.external": true,
   "elements": {
    "code": {
     "type": "cds.String",
     "notNull": true
    },
    "message": {
     "type": "cds.String",
     "notNull": true
    },
    "target": {
     "type": "cds.String"
    },
    "additionalTargets": {
     "items": {
      "type": "cds.String",
      "notNull": true
     }
    },
    "transition": {
     "type": "cds.Boolean",
     "notNull": true
    },
    "numericSeverity": {
     "type": "cds.Integer",
     "@odata.Type": "Edm.Byte",
     "notNull": true
    },
    "longtextUrl": {
     "type": "cds.String"
    }
   }
  },
  "ZUI_COLLECTIQ_V4": {
   "kind": "service",
   "@cds.external": true,
   "@CodeList.CurrencyCodes.Url": "../../../../default/iwbep/common/0001/$metadata",
   "@CodeList.CurrencyCodes.CollectionPath": "Currencies",
   "@Common.ApplyMultiUnitBehaviorForSortingAndFiltering": true,
   "@Capabilities.FilterFunctions": [
    "eq",
    "ne",
    "gt",
    "ge",
    "lt",
    "le",
    "and",
    "or",
    "contains",
    "startswith",
    "endswith",
    "any",
    "all"
   ],
   "@SAP__support.TechnicalInfoLinks.Url": "../../../../default/iwbep/common/0001/$metadata",
   "@SAP__support.TechnicalInfoLinks.FunctionImport": "GetTechnicalInfoLinks",
   "@Capabilities.SupportedFormats": [
    "application/json",
    "application/pdf"
   ],
   "@PDF.Features.DocumentDescriptionReference": "../../../../default/iwbep/common/0001/$metadata",
   "@PDF.Features.DocumentDescriptionCollection": "MyDocumentDescriptions",
   "@PDF.Features.ArchiveFormat": true,
   "@PDF.Features.Border": true,
   "@PDF.Features.CoverPage": true,
   "@PDF.Features.FitToPage": true,
   "@PDF.Features.FontName": true,
   "@PDF.Features.FontSize": true,
   "@PDF.Features.HeaderFooter": true,
   "@PDF.Features.IANATimezoneFormat": true,
   "@PDF.Features.Margin": true,
   "@PDF.Features.Padding": true,
   "@PDF.Features.ResultSizeDefault": 20000,
   "@PDF.Features.ResultSizeMaximum": 20000,
   "@PDF.Features.Signature": true,
   "@PDF.Features.TextDirectionLayout": true,
   "@PDF.Features.Treeview": true,
   "@PDF.Features.UploadToFileShare": true,
   "@Capabilities.KeyAsSegmentSupported": true,
   "@Capabilities.AsynchronousRequestsSupported": true
  },
  "ZUI_COLLECTIQ_V4.Invoice": {
   "kind": "entity",
   "@cds.external": true,
   "@cds.persistence.skip": true,
   "elements": {
    "InvoiceId": {
     "key": true,
     "type": "cds.UUID",
     "notNull": true,
     "@Core.ComputedDefaultValue": true,
     "@Common.Label": "UUID",
     "@Common.QuickInfo": "16 Byte UUID in 16 Bytes (Raw Format)"
    },
    "PayerId": {
     "type": "cds.String",
     "length": 20,
     "notNull": true,
     "@Core.Computed": true,
     "@Common.Label": "column id",
     "@Common.QuickInfo": "invoice id"
    },
    "InvoiceNumber": {
     "type": "cds.String",
     "length": 20,
     "notNull": true,
     "@Common.Label": "column id",
     "@Common.QuickInfo": "invoice id"
    },
    "InvoiceAmount": {
     "type": "cds.Decimal",
     "precision": 15,
     "notNull": true,
     "@Measures.ISOCurrency": {
      "=": "Currency"
     },
     "@Common.Label": "amount"
    },
    "DueDate": {
     "type": "cds.Date",
     "@Common.Label": "Created On",
     "@Common.QuickInfo": "Creation Date",
     "@Common.DocumentationRef": "urn:sap-com:documentation:key?=type=DE&id=ABP_CREATION_DATE"
    },
    "DaysPastDue": {
     "type": "cds.Integer",
     "notNull": true,
     "@Common.Label": "INT4",
     "@Common.QuickInfo": "4 Byte Signed Integer"
    },
    "Currency": {
     "type": "cds.String",
     "length": 5,
     "notNull": true,
     "@Common.IsCurrency": true,
     "@Common.Label": "currency",
     "@Common.QuickInfo": "currency code"
    },
    "__EntityControl": {
     "type": "ZUI_COLLECTIQ_V4.EntityControl",
     "@Core.Computed": true,
     "@UI.HiddenFilter": true,
     "@UI.Hidden": true
    },
    "SAP__Messages": {
     "items": {
      "type": "ZUI_COLLECTIQ_V4.SAP__Message",
      "notNull": true
     }
    },
    "_Payer": {
     "type": "cds.Association",
     "target": "ZUI_COLLECTIQ_V4.Payer",
     "cardinality": {
      "max": 1
     }
    }
   },
   "@Common.Label": "Invoice Data for CollectIQ",
   "@UI.Facets": [
    {
     "$Type": "SAP__UI.ReferenceFacet",
     "Label": "Invoice Info",
     "ID": "InvoiceData",
     "Target": {
      "=": "@UI.Identification"
     }
    }
   ],
   "@UI.Identification": [
    {
     "$Type": "SAP__UI.DataField",
     "Value": {
      "=": "InvoiceNumber"
     }
    },
    {
     "$Type": "SAP__UI.DataField",
     "Value": {
      "=": "InvoiceAmount"
     }
    },
    {
     "$Type": "SAP__UI.DataField",
     "Value": {
      "=": "DueDate"
     }
    }
   ],
   "@UI.LineItem": [
    {
     "$Type": "SAP__UI.DataField",
     "Value": {
      "=": "InvoiceNumber"
     }
    },
    {
     "$Type": "SAP__UI.DataField",
     "Value": {
      "=": "InvoiceAmount"
     }
    },
    {
     "$Type": "SAP__UI.DataField",
     "Value": {
      "=": "DueDate"
     }
    },
    {
     "$Type": "SAP__UI.DataField",
     "Value": {
      "=": "DaysPastDue"
     }
    }
   ],
   "@Common.Messages": {
    "=": "SAP__Messages"
   },
   "@Capabilities.NavigationRestrictions.RestrictedProperties": [
    {
     "NavigationProperty": {
      "=": "_Payer"
     },
     "InsertRestrictions": {
      "Insertable": false
     },
     "DeepUpdateSupport": {
      "Supported": false
     }
    }
   ],
   "@Capabilities.SearchRestrictions.Searchable": false,
   "@Capabilities.FilterRestrictions.NonFilterableProperties": [
    "__EntityControl"
   ],
   "@Capabilities.SortRestrictions.NonSortableProperties": [
    "__EntityControl"
   ],
   "@Capabilities.UpdateRestrictions.DeltaUpdateSupported": true,
   "@Capabilities.UpdateRestrictions.Updatable": {
    "=": "__EntityControl/Updatable"
   },
   "@Capabilities.UpdateRestrictions.NonUpdatableNavigationProperties": [
    "_Payer"
   ],
   "@Capabilities.UpdateRestrictions.QueryOptions.SelectSupported": true,
   "@Capabilities.DeepUpdateSupport.ContentIDSupported": true,
   "@Capabilities.InsertRestrictions.Insertable": false,
   "@Capabilities.DeleteRestrictions.Deletable": {
    "=": "__EntityControl/Deletable"
   }
  },
  "ZUI_COLLECTIQ_V4.Payer": {
   "kind": "entity",
   "@cds.external": true,
   "@cds.persistence.skip": true,
   "elements": {
    "PayerId": {
     "key": true,
     "type": "cds.String",
     "length": 20,
     "notNull": true,
     "@Core.ComputedDefaultValue": true,
     "@Common.Label": "column id",
     "@Common.QuickInfo": "invoice id"
    },
    "PayerName": {
     "type": "cds.String",
     "length": 120,
     "notNull": true,
     "@Common.Label": "name",
     "@Common.QuickInfo": "comapny name"
    },
    "TotalPastDue": {
     "type": "cds.Decimal",
     "precision": 15,
     "notNull": true,
     "@Measures.ISOCurrency": {
      "=": "Currency"
     },
     "@Common.Label": "amount"
    },
    "MaxDaysPastDue": {
     "type": "cds.Integer",
     "notNull": true,
     "@Common.Label": "INT4",
     "@Common.QuickInfo": "4 Byte Signed Integer"
    },
    "Stage": {
     "type": "cds.String",
     "length": 15,
     "notNull": true,
     "@Common.Label": "stage"
    },
    "ContactEmail": {
     "type": "cds.String",
     "length": 120,
     "notNull": true,
     "@Common.Label": "name",
     "@Common.QuickInfo": "comapny name"
    },
    "LastOutreachStatus": {
     "type": "cds.String",
     "length": 30,
     "notNull": true,
     "@Common.Label": "status"
    },
    "Currency": {
     "type": "cds.String",
     "length": 5,
     "notNull": true,
     "@Common.IsCurrency": true,
     "@Common.Label": "currency",
     "@Common.QuickInfo": "currency code"
    },
    "__CreateByAssociationControl": {
     "type": "ZUI_COLLECTIQ_V4.PayerCbAControl",
     "@Core.Computed": true,
     "@UI.HiddenFilter": true,
     "@UI.Hidden": true
    },
    "__EntityControl": {
     "type": "ZUI_COLLECTIQ_V4.EntityControl",
     "@Core.Computed": true,
     "@UI.HiddenFilter": true,
     "@UI.Hidden": true
    },
    "__OperationControl": {
     "type": "ZUI_COLLECTIQ_V4.PayerOperationControl",
     "@Core.Computed": true,
     "@UI.HiddenFilter": true,
     "@UI.Hidden": true
    },
    "SAP__Messages": {
     "items": {
      "type": "ZUI_COLLECTIQ_V4.SAP__Message",
      "notNull": true
     }
    },
    "_Invoices": {
     "type": "cds.Composition",
     "target": "ZUI_COLLECTIQ_V4.Invoice",
     "cardinality": {
      "max": "*"
     },
     "on": [
      {
       "ref": [
        "_Invoices",
        "_Payer"
       ]
      },
      "=",
      {
       "ref": [
        "$self"
       ]
      }
     ],
     "@Common.Composition": true
    }
   },
   "actions": {
    "generateOutreach": {
     "kind": "action",
     "params": {},
     "returns": {
      "type": "ZUI_COLLECTIQ_V4.Payer",
      "notNull": true
     },
     "@Core.OperationAvailable": {
      "=": "_it/__OperationControl/generateOutreach"
     }
    }
   },
   "@Common.Label": "Payer Data for CollectIQ",
   "@UI.DataPoint#TotalDue.Value": {
    "=": "TotalPastDue"
   },
   "@UI.DataPoint#TotalDue.Title": "Total Past Due",
   "@UI.Facets": [
    {
     "$Type": "SAP__UI.CollectionFacet",
     "Label": "Payer Details",
     "ID": "GeneralInfo",
     "Facets": []
    },
    {
     "$Type": "SAP__UI.ReferenceFacet",
     "Label": "Invoices",
     "ID": "Invoices",
     "Target": {
      "=": "_Invoices.@UI.LineItem"
     }
    },
    {
     "$Type": "SAP__UI.ReferenceFacet",
     "Label": "Outreach Content",
     "ID": "Outreach",
     "Target": {
      "=": "@UI.Identification"
     }
    }
   ],
   "@UI.HeaderInfo.TypeName": "Payer",
   "@UI.HeaderInfo.TypeNamePlural": "Payers",
   "@UI.HeaderInfo.Title.$Type": "SAP__UI.DataField",
   "@UI.HeaderInfo.Title.Value": {
    "=": "PayerName"
   },
   "@UI.Identification": [
    {
     "$Type": "SAP__UI.DataField",
     "Value": {
      "=": "PayerName"
     }
    },
    {
     "$Type": "SAP__UI.DataField",
     "Value": {
      "=": "TotalPastDue"
     }
    },
    {
     "$Type": "SAP__UI.DataField",
     "Value": {
      "=": "ContactEmail"
     }
    }
   ],
   "@UI.LineItem": [
    {
     "$Type": "SAP__UI.DataField",
     "Value": {
      "=": "PayerId"
     }
    },
    {
     "$Type": "SAP__UI.DataField",
     "Value": {
      "=": "PayerName"
     }
    },
    {
     "$Type": "SAP__UI.DataField",
     "Value": {
      "=": "TotalPastDue"
     }
    },
    {
     "$Type": "SAP__UI.DataField",
     "Value": {
      "=": "MaxDaysPastDue"
     }
    },
    {
     "$Type": "SAP__UI.DataField",
     "Criticality": {
      "=": "MaxDaysPastDue"
     },
     "Value": {
      "=": "Stage"
     }
    },
    {
     "$Type": "SAP__UI.DataField",
     "Value": {
      "=": "LastOutreachStatus"
     }
    },
    {
     "$Type": "SAP__UI.DataFieldForAction",
     "Label": "Generate Outreach",
     "Action": "ZUI_COLLECTIQ_V4.generateOutreach(ZUI_COLLECTIQ_V4.PayerType)",
     "InvocationGrouping": {
      "#": "Isolated"
     }
    }
   ],
   "@UI.SelectionFields": [
    "PayerId",
    "Stage"
   ],
   "@Common.Messages": {
    "=": "SAP__Messages"
   },
   "@Capabilities.NavigationRestrictions.RestrictedProperties": [
    {
     "NavigationProperty": {
      "=": "_Invoices"
     },
     "InsertRestrictions": {
      "Insertable": {
       "=": "__CreateByAssociationControl/_Invoices"
      }
     }
    }
   ],
   "@Capabilities.SearchRestrictions.Searchable": false,
   "@Capabilities.FilterRestrictions.NonFilterableProperties": [
    "__CreateByAssociationControl",
    "__EntityControl",
    "__OperationControl"
   ],
   "@Capabilities.SortRestrictions.NonSortableProperties": [
    "__CreateByAssociationControl",
    "__EntityControl",
    "__OperationControl"
   ],
   "@Capabilities.UpdateRestrictions.DeltaUpdateSupported": true,
   "@Capabilities.UpdateRestrictions.Updatable": {
    "=": "__EntityControl/Updatable"
   },
   "@Capabilities.UpdateRestrictions.NonUpdatableNavigationProperties": [
    "_Invoices"
   ],
   "@Capabilities.UpdateRestrictions.QueryOptions.SelectSupported": true,
   "@Capabilities.DeepUpdateSupport.ContentIDSupported": true,
   "@Capabilities.DeleteRestrictions.Deletable": {
    "=": "__EntityControl/Deletable"
   }
  }
 }
}